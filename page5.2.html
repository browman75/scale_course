<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>鳥類飛行羽毛的結構</title>
<style>
body {
    font-family: 'Microsoft JhengHei', sans-serif;
    margin: 0;
    padding: 20px;
    background: linear-gradient(135deg,#e3f2fd 0%,#f8f9fa 100%);
}
.container {
    max-width:1000px;
    margin:0 auto;
    background:white;
    border-radius:20px;
    box-shadow:0 10px 30px rgba(0,0,0,0.1);
    overflow:hidden;
}
.header { background:linear-gradient(135deg,#2196f3 0%,#1976d2 100%); color:white; padding:30px; text-align:center; }
.header h1 { margin:0; font-size:2.5rem; }
.content { padding:30px; }
.exercise-section { margin:40px 0; padding:25px; background:#f8f9fa; border-radius:15px; border-left:5px solid #2196f3; }
.exercise-title { font-size:1.5rem; font-weight:bold; color:#1976d2; margin-bottom:20px; }
.drag-container { display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:15px; margin:20px 0; }
.draggable {
    padding:15px 20px; background:#e3f2fd; border:2px solid #2196f3; border-radius:15px;
    cursor:move; user-select:none; transition:all 0.3s ease; text-align:center;
}
.draggable.dragging { opacity:0.5; transform:rotate(5deg); }
.drop-zone {
    min-height:60px; border:3px dashed #ccc; border-radius:10px; padding:15px; margin:10px 0;
    background:#fafafa; display:flex; align-items:center; justify-content:center; font-style:italic; color:#666;
}
.drop-zone.drag-over { border-color:#2196f3; background:#e3f2fd; transform:scale(1.02); }
.drop-zone.filled { background:#c8e6c9; border-color:#4caf50; font-style:normal; color:#2e7d32; font-weight:bold; }
.reset-btn { background:#ff9800; color:white; border:none; padding:12px 25px; border-radius:25px; cursor:pointer; font-weight:bold; margin:20px 0; }
.reset-btn:hover { background:#f57c00; transform:translateY(-2px); }
@media(max-width:768px){.drag-container{grid-template-columns:1fr;}}
</style>
</head>
<body>
<div class="container">
    <div class="header"><h1>🪶 鳥類飛行羽毛的結構</h1></div>
    <div class="content">
        <div class="exercise-section">
            <div class="exercise-title">🔬 拖曳題練習</div>
            <div class="drag-container">
                <div class="draggable" draggable="true">👁️ 以肉眼觀察羽毛的排列</div>
                <div class="draggable" draggable="true">📐 羽毛排列整齊，不易被風吹動</div>
                <div class="draggable" draggable="true">🔬 使用顯微鏡觀察羽毛正面結構</div>
                <div class="draggable" draggable="true">🪝 羽毛間有倒鉤細毛，使羽毛緊密連接</div>
            </div>
            <div class="drop-zone" data-answer="👁️ 以肉眼觀察羽毛的排列">將答案拖曳到這裡</div>
            <div class="drop-zone" data-answer="📐 羽毛排列整齊，不易被風吹動">將答案拖曳到這裡</div>
            <div class="drop-zone" data-answer="🔬 使用顯微鏡觀察羽毛正面結構">將答案拖曳到這裡</div>
            <div class="drop-zone" data-answer="🪝 羽毛間有倒鉤細毛，使羽毛緊密連接">將答案拖曳到這裡</div>
            <button class="reset-btn" onclick="resetDragDrop()">🔄 重新開始</button>
        </div>
    </div>
</div>

<script>
// 全裝置拖曳功能
let draggedEl = null, cloneEl = null, isDragging = false;

document.querySelectorAll('.draggable').forEach(el=>{
    // 桌面拖曳
    el.addEventListener('dragstart', e=>{
        draggedEl = el;
        el.classList.add('dragging');
    });
    el.addEventListener('dragend', e=>{
        el.classList.remove('dragging');
    });

    // 觸控拖曳
    el.addEventListener('touchstart', e=>{
        draggedEl = el;
        isDragging=false;
        const touch=e.touches[0];
        el.startX=touch.clientX; el.startY=touch.clientY;
    });
    el.addEventListener('touchmove', e=>{
        const touch=e.touches[0];
        const dx=Math.abs(touch.clientX-el.startX);
        const dy=Math.abs(touch.clientY-el.startY);
        if(!isDragging && (dx>10||dy>10)){
            isDragging=true;
            cloneEl=el.cloneNode(true);
            cloneEl.style.position='fixed';
            cloneEl.style.zIndex='1000';
            cloneEl.style.pointerEvents='none';
            cloneEl.style.opacity='0.8';
            cloneEl.style.transform='rotate(5deg) scale(0.95)';
            document.body.appendChild(cloneEl);
        }
        if(isDragging && cloneEl){
            cloneEl.style.left=(touch.clientX-50)+'px';
            cloneEl.style.top=(touch.clientY-30)+'px';
            document.querySelectorAll('.drop-zone').forEach(zone=>zone.classList.remove('drag-over'));
            const under=document.elementFromPoint(touch.clientX,touch.clientY);
            const drop=under?.closest('.drop-zone');
            if(drop) drop.classList.add('drag-over');
        }
        e.preventDefault();
    });
    el.addEventListener('touchend', e=>{
        if(isDragging && cloneEl){
            const touch=e.changedTouches[0];
            const under=document.elementFromPoint(touch.clientX,touch.clientY);
            const drop=under?.closest('.drop-zone');
            if(drop && draggedEl){
                if(draggedEl.textContent.trim()===drop.dataset.answer){
                    drop.textContent=draggedEl.textContent;
                    drop.classList.add('filled');
                    draggedEl.style.display='none';
                }
            }
            document.body.removeChild(cloneEl);
            cloneEl=null;
        }
        draggedEl=null;
        isDragging=false;
        document.querySelectorAll('.drop-zone').forEach(zone=>zone.classList.remove('drag-over'));
    });
});

// 放置區域
document.querySelectorAll('.drop-zone').forEach(zone=>{
    zone.addEventListener('dragover', e=>{e.preventDefault(); zone.classList.add('drag-over');});
    zone.addEventListener('dragleave', e=>{zone.classList.remove('drag-over');});
    zone.addEventListener('drop', e=>{
        e.preventDefault(); zone.classList.remove('drag-over');
        if(draggedEl && draggedEl.textContent.trim()===zone.dataset.answer){
            zone.textContent=draggedEl.textContent;
            zone.classList.add('filled');
            draggedEl.style.display='none';
        }
    });
});

function resetDragDrop(){
    document.querySelectorAll('.draggable').forEach(el=>el.style.display='block');
    document.querySelectorAll('.drop-zone').forEach(zone=>{
        zone.classList.remove('filled','drag-over');
        zone.textContent='將答案拖曳到這裡';
    });
}
</script>
</body>
</html>
